generator client {
  provider      = "prisma-client-js"
  output        = "../src/generated/prisma/client"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL_DEV")
}

model Cliente {
  id                   String       @id @default(uuid())
  nome                 String
  dataNascimento       String?
  contato              String?
  email                String?
  typeDocumentSelected String?
  documento            String?
  cidade               String?
  bairro               String?
  rua                  String?
  numero               String?
  ultimaViagem         DateTime?
  createdAt            DateTime     @default(now())
  updatedAt            DateTime     @updatedAt
  dependentes          Dependente[]
  passageiro           Passageiro?
}

model Dependente {
  id        String   @id @default(uuid())
  nome      String
  documento String?
  poltrona  String?
  clienteId String
  viagemId  String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  cliente   Cliente  @relation(fields: [clienteId], references: [id])
  viagens   Viagem[] @relation("ViagemDependentes")
}

model Passageiro {
  id                   String   @id @default(uuid())
  nome                 String
  typeDocumentSelected String
  documento            String
  clienteId            String?  @unique
  cliente              Cliente? @relation(fields: [clienteId], references: [id])
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt
  viagens              Viagem[] @relation("ViagemPassageiros")
}

model FluxoCaixa {
  id             String         @id @default(uuid())
  tipo           TipoOperacao
  valor          Float
  data           DateTime
  formaPagamento FormaPagamento
  descricao      String?
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt
}

enum TipoOperacao {
  ENTRADA
  SAIDA
}

enum FormaPagamento {
  PIX
  DINHEIRO
  CARTAO_DE_CREDITO
}

model Viagem {
  id          String       @id @default(uuid())
  dataViagem  DateTime
  passageiros Passageiro[] @relation("ViagemPassageiros")
  dependentes Dependente[] @relation("ViagemDependentes")
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
}

model Usuario {
  id    Int    @id @default(autoincrement())
  email String @unique
  senha String
  nome  String
}
